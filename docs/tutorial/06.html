<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <title>Tutorial #6 - SivBoard</title>
  <meta name="description" content="SivBoard のチュートリアル #6 です。サンプルコードもあります。">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link rel="stylesheet" href="tutorial.css">
</head>

<body>
  <nav>
    <div class="nav-wrapper blue-grey darken-1">
      <a class="brand-logo" style="padding-left:10px;">Nyuma Labo</a>
      <ul id="nav-mobile" class="right">
        <li><a href="../">Top</a></li>
        <li><a href="../tutorial.html">Tutorial<span class="new badge" data-badge-caption="使い方"></span></a></li>
        <li><a href="../help.html">Help</a></li>
      </ul>
    </div>
  </nav>

  <h1>SivBoard - Tutorial</h1>
  <h4>#6 : データ構造</h4>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1.png"></img>
    </div>
    <div class="balloon-text">
      <p>この章では、配列やグリッドについて解説していくよ。<br>
        まずは、この章のサンプルデモを紹介するね。</p>
    </div>
  </div>

  <div class="row">
    <div class="col s12 offset-m1 m6">
      <image src="06/06a.gif" />
    </div>
  </div>

  <div class="row">
    <div class="col s2 white">
      <a href="06/script.txt" download>📥 script.txt</a>
    </div>
    <div class="col s11 white">
<pre><code>void Main()
{
    Font font(60);
    int n=0, i, k;
    int size = 10;
    int blank;
    Array&lt;Vec2&gt; block;
    Array&lt;int32&gt; type;
    Array&lt;int32&gt; ground(Scene::Width() / size, 0);
    Array&lt;int32&gt; bottom;
    Stopwatch sw(true);
    Grid&lt;int32&gt; data =
    {
        {0,-1, 1,-1, 2,-1, 1, 0}, // T
        {0,-1, 1,-1, 1, 0, 2, 0}, // Z
        {2,-1, 1,-1, 1, 0, 0, 0}, // S
        {0,-2, 0,-1, 0, 0, 1, 0}, // L
        {1,-2, 1,-1, 0, 0, 1, 0}, // J
        {0,-1, 1,-1, 1, 0, 0, 0}, // O
        {0,-3, 0,-2, 0,-1, 0, 0}  // I
    };
    while(System::Update())
    {
        if (sw.sF() > 0.2)
        {
            sw.restart();
            type << Random(6);
            int x = Random(Scene::Width() / size - 4);
            block << Vec2(x, -size);
            blank = Scene::Height() / size - 1;
            for(k = 3; k >= 0; k--)
            {
                blank = Min(Scene::Height() / size - ground[data[k * 2, type[n]] + x] - data[k * 2 + 1, type[n]], blank);
            }
            for(k = 3; k >= 0; k--)
            {
                ground[data[k * 2, type[n]] + x] = Scene::Height() / size - blank - data[k * 2 + 1, type[n]] + 1;
            }
            bottom << blank * size;
            n++;
        }
        for (i = 0; i < n; i++)
        {
            block[i].y += Scene::DeltaTime() * 200;
            block[i].y = Min(block[i].y, double(bottom[i]));
            for (k = 3; k >= 0; k--)
            {
                Rect((block[i].x + data[k * 2, type[i]] + 1) * size, block[i].y + data[k * 2 + 1, type[i]] * size, size - 1, size - 1).draw();
            }
        }
        font("Hello, SivBoard!🐣").drawAt(Scene::Center(), Palette::White);
    }
}</code></pre>
    </div>
  </div>

  <footer class="page-footer blue-grey darken-1">
    <div class="footer-copyright">
      <div class="container">
        <h6 class="center-align">- Copyright © 2021 Nyuma -</h6>
      </div>
    </div>
  </footer>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>

</html>
