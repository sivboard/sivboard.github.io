<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <title>Tutorial #3 - SivBoard</title>
  <meta name="description" content="SivBoard のチュートリアル #3 です。サンプルコードもあります。">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons%7CMaterial+Icons+Outlined" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link rel="stylesheet" href="tutorial.css">
</head>

<body>
  <nav>
    <div class="nav-wrapper blue-grey darken-1">
      <a class="brand-logo" style="padding-left:10px;">Nyuma Labo</a>
      <ul id="nav-mobile" class="right">
        <li><a href="../">Top</a></li>
        <li><a href="../tutorial.html">Tutorial<span class="new badge" data-badge-caption="使い方"></span></a></li>
        <li><a href="../help.html">Help</a></li>
      </ul>
    </div>
  </nav>

  <h1>SivBoard - Tutorial</h1>
  <h4>#3 : 動きを作る</h4>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1.png"></img>
    </div>
    <div class="balloon-text">
      <p>この章では、動きを作る方法について解説していくよ。<br>
        まずは、この章のサンプルデモを紹介するね。</p>
    </div>
  </div>

  <div class="row">
    <div class="col s12 offset-m1 m6">
      <image src="03/03a.gif" />
    </div>
  </div>

  <div class="row">
    <div class="col s2 white">
      <a href="03/script.txt" download>📥 script.txt</a>
    </div>
    <div class="col s11 white">
<pre><code>void Main()
{
    Font font(60);
    Stopwatch sw(true);

    while(System::Update())
    {
        double t = sw.sF();
        double d1 = Periodic::Triangle0_1(3, t);
        double d2 = Periodic::Sine0_1(3, t);
        double d3 = Periodic::Jump0_1(3, t);
        double d4 = Periodic::Flash0_1(3, t);

        Circle(Vec2(100, 500 - d1 * 400), 20).draw(Palette::Turquoise);
        Circle(Vec2(140, 500 - EaseInOutQuad(d1) * 400), 20).draw(Palette::Turquoise);
        Circle(Vec2(180, 500 - EaseInOutExpo(d1) * 400), 20).draw(Palette::Turquoise);
        Circle(Vec2(220, 500 - EaseInOutBounce(d1) * 400), 20).draw(Palette::Turquoise);

        Circle(Vec2(260, 500 - d2 * 400), 20).draw(Palette::Lightcoral);
        Circle(Vec2(300, 500 - EaseInOutQuad(d2) * 400), 20).draw(Palette::Lightcoral);
        Circle(Vec2(340, 500 - EaseInOutExpo(d2) * 400), 20).draw(Palette::Lightcoral);
        Circle(Vec2(380, 500 - EaseInOutBounce(d2) * 400), 20).draw(Palette::Lightcoral);

        Circle(Vec2(420, 500 - d3 * 400), 20).draw(Palette::Skyblue);
        Circle(Vec2(460, 500 - EaseInOutQuad(d3) * 400), 20).draw(Palette::Skyblue);
        Circle(Vec2(500, 500 - EaseInOutExpo(d3) * 400), 20).draw(Palette::Skyblue);
        Circle(Vec2(540, 500 - EaseInOutBounce(d3) * 400), 20).draw(Palette::Skyblue);

        Circle(Vec2(580, 500 - d4 * 400), 20).draw(Palette::Khaki);
        Circle(Vec2(620, 500 - EaseInOutQuad(d4) * 400), 20).draw(Palette::Khaki);
        Circle(Vec2(660, 500 - EaseInOutExpo(d4) * 400), 20).draw(Palette::Khaki);
        Circle(Vec2(700, 500 - EaseInOutBounce(d4) * 400), 20).draw(Palette::Khaki);

        Line(Vec2(80,80),Vec2(720,80)).draw(5, Palette::White);
        Line(Vec2(80,520),Vec2(720,520)).draw(5, Palette::White);

        font("Hello, SivBoard!🐣").drawAt(Scene::Center(), Palette::White);

        if (MouseL.down())
        {
            if (sw.isPaused()) { sw.resume(); }
            else { sw.pause(); }
        }
    }
}</code></pre>
    </div>
  </div>

  <div class="balloon-right">
    <div class="balloon-icon">
      <img src="../data/rage1.png"></img>
    </div>
    <div class="balloon-text">
      <p>少し、コードに慣れてきたぞ。<br>
        下の方にある条件分岐の if 文は初めて見たかも。</p>
    </div>
  </div>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1.png"></img>
    </div>
    <div class="balloon-text">
      <p>そうだね。if 文の書き方は、C言語と同じだから安心して。<br>
        この if 文では、左クリックの制御を記述しているんだ。<br>
        順番に説明していくね。</p>
    </div>
  </div>

  <h5>#3-1 : ストップウォッチ</h5>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1.png"></img>
    </div>
    <div class="balloon-text">
      <p>まずは、ストップウォッチについて説明するよ。<br>
        これは、経過時間の計測や、一時停止、リセットができる。<br>
        Stopwatch の定義で true を指定すると、すぐ計測を開始する。</p>
    </div>
  </div>

  <div class="row">
    <div class="col s11 white">
<pre><code>    Stopwatch sw(true);

    while(System::Update())
    {
        double t = sw.sF();

        if (MouseL.down())
        {
            if (sw.isPaused()) { sw.resume(); }
            else { sw.pause(); }
        }
    }</code></pre>
    </div>
  </div>

  <div class="balloon-right">
    <div class="balloon-icon">
      <img src="../data/rage1.png"></img>
    </div>
    <div class="balloon-text">
      <p>任意のタイミングでの計測開始もできるのね。<br>
        sw.sF() というのはなに？</p>
    </div>
  </div>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1.png"></img>
    </div>
    <div class="balloon-text">
      <p>これは、経過時間を秒で取得する関数だよ。<br>
        他に、ミリ秒なら msF()、マイクロ秒なら usF() がある。<br>
        整数で秒を取得したいなら s() を使う。</p>
    </div>
  </div>

  <div class="balloon-right">
    <div class="balloon-icon">
      <img src="../data/rage1.png"></img>
    </div>
    <div class="balloon-text">
      <p>秒の経過時間を小数で取得しているのね。<br>
        if 文ではそれぞれ何をしているの？</p>
    </div>
  </div>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1.png"></img>
    </div>
    <div class="balloon-text">
      <p>MouseL.down() で左クリックを監視して、<br>
        isPaused() で一時停止状態かを確認している。<br>
        pause() は一時停止。resume() は計測の再開だね。</p>
    </div>
  </div>

  <div class="balloon-right">
    <div class="balloon-icon">
      <img src="../data/rage1c.png"></img>
    </div>
    <div class="balloon-text">
      <p>つまり、左クリックされたときに、<br>
        一時停止状態でなければ、一時停止。<br>
        一時停止状態なら、計測を再開という事か。。</p>
    </div>
  </div>

  <h5>#3-2 : 周期的なアニメーション</h5>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1.png"></img>
    </div>
    <div class="balloon-text">
      <p>次に、Periodic について説明するよ。<br>
        これは周期的なアニメーションに便利なんだ。<br>
        関数はいくつかあるけど、すべて 0.0 ～ 1.0 の値を返すよ。</p>
    </div>
  </div>

  <div class="row">
    <div class="col s11 white">
<pre><code>        double d1 = Periodic::Triangle0_1(3, t);
        double d2 = Periodic::Sine0_1(3, t);
        double d3 = Periodic::Jump0_1(3, t);
        double d4 = Periodic::Flash0_1(3, t);</code></pre>
    </div>
  </div>

  <div class="balloon-right">
    <div class="balloon-icon">
      <img src="../data/rage1d.png"></img>
    </div>
    <div class="balloon-text">
      <p>すべて 0.0 ～ 1.0 の値を返すの？<br>
        うーん、イメージができない。。</p>
    </div>
  </div>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1c.png"></img>
    </div>
    <div class="balloon-text">
      <p>そうだよね。。解説用の図を下に用意したよ。<br>
        最初の引数は、周期を秒で指定できる。3 なら 3秒 だね。<br>
        二番目の引数は、経過時間を秒で指定する。省略もできる。</p>
    </div>
  </div>

  <div class="row">
    <div class="col s12 offset-m1 m6">
      <image src="03/03b.png" style="width:400px;" />
    </div>
  </div>

  <div class="balloon-right">
    <div class="balloon-icon">
      <img src="../data/rage1c.png"></img>
    </div>
    <div class="balloon-text">
      <p>なるほど、、同じ経過時間でも、<br>
        関数によって戻り値が違うんだね。</p>
    </div>
  </div>

  <h5>#3-3 : イージング</h5>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1.png"></img>
    </div>
    <div class="balloon-text">
      <p>最後にイージングについて説明するよ。<br>
        イージング関数を使う事で、複雑な動きが作れるんだ。<br>
        入力と出力は共に 0.0 ～ 1.0 だから、掛け合わせも出来る。</p>
    </div>
  </div>

  <div class="row">
    <div class="col s11 white">
<pre><code>        Circle(Vec2(100, 500 - d1 * 400), 20).draw(Palette::Turquoise);
        Circle(Vec2(140, 500 - EaseInOutQuad(d1) * 400), 20).draw(Palette::Turquoise);
        Circle(Vec2(180, 500 - EaseInOutExpo(d1) * 400), 20).draw(Palette::Turquoise);
        Circle(Vec2(220, 500 - EaseInOutBounce(d1) * 400), 20).draw(Palette::Turquoise);

        Circle(Vec2(260, 500 - d2 * 400), 20).draw(Palette::Lightcoral);
        Circle(Vec2(300, 500 - EaseInOutQuad(d2) * 400), 20).draw(Palette::Lightcoral);
        Circle(Vec2(340, 500 - EaseInOutExpo(d2) * 400), 20).draw(Palette::Lightcoral);
        Circle(Vec2(380, 500 - EaseInOutBounce(d2) * 400), 20).draw(Palette::Lightcoral);

        Circle(Vec2(420, 500 - d3 * 400), 20).draw(Palette::Skyblue);
        Circle(Vec2(460, 500 - EaseInOutQuad(d3) * 400), 20).draw(Palette::Skyblue);
        Circle(Vec2(500, 500 - EaseInOutExpo(d3) * 400), 20).draw(Palette::Skyblue);
        Circle(Vec2(540, 500 - EaseInOutBounce(d3) * 400), 20).draw(Palette::Skyblue);

        Circle(Vec2(580, 500 - d4 * 400), 20).draw(Palette::Khaki);
        Circle(Vec2(620, 500 - EaseInOutQuad(d4) * 400), 20).draw(Palette::Khaki);
        Circle(Vec2(660, 500 - EaseInOutExpo(d4) * 400), 20).draw(Palette::Khaki);
        Circle(Vec2(700, 500 - EaseInOutBounce(d4) * 400), 20).draw(Palette::Khaki);</code></pre>
    </div>
  </div>

  <div class="balloon-right">
    <div class="balloon-icon">
      <img src="../data/rage1.png"></img>
    </div>
    <div class="balloon-text">
      <p>組み合わせて複雑なタイミングを作れるのか。<br>
        イージング関数は何種類くらいあるの？</p>
    </div>
  </div>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1.png"></img>
    </div>
    <div class="balloon-text">
      <p>全部で 30種類 くらいあるよ。今回のデモでは、<br>
        4種類の色分けした Periodic に、イージング関数を掛けて<br>
        16パターンのタイミングを作っているよ。</p>
    </div>
  </div>

  <div class="balloon-right">
    <div class="balloon-icon">
      <img src="../data/rage1.png"></img>
    </div>
    <div class="balloon-text">
      <p>各色の一番左はイージング無しの動作だね。<br>
        色々な動きのパターンが作れそう。<br>
        ワクワクしてきたぞ！</p>
    </div>
  </div>

  <h5>#3-4 : この章のまとめ</h5>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1.png"></img>
    </div>
    <div class="balloon-text">
      <p>今回は、いろいろな動きを作る方法について解説したよ。<br>
        紹介しきれなかった Periodic やイージング関数があるから、<br>
        いろいろ試してみてね。</p>
    </div>
  </div>

   <div class="balloon-right">
    <div class="balloon-icon">
      <img src="../data/rage1c.png"></img>
    </div>
    <div class="balloon-text">
      <p>ちゃらららっちゃっちゃちゃっちゃー♪<br>
        すばやさが 1 あがった。<br>
        かしこさが 1 あがった。<br>
        やるきが 1 あがった。</p>
    </div>
  </div>

  <h5>#3-X : 編集後記</h5>

  <div class="balloon-left">
    <div class="balloon-icon">
      <img src="../data/yunia1c.png"></img>
    </div>
    <div class="balloon-text">
      <p>起動からの経過時間は Scene::Time() で取得できるよ。<br>
        Periodic の二番目の引数を省略した場合、これが適用される。<br>
        Periodic は他にもいくつかあるから、ヘルプで確認してね。<br>
        イージング関数は、本家の Siv3D のチュートリアルで確認できるよ。</p>
    </div>
  </div>

  <footer class="page-footer blue-grey darken-1">
    <div class="footer-copyright">
      <div class="container">
        <h6 class="center-align">- Copyright © 2021 Nyuma -</h6>
      </div>
    </div>
  </footer>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>

</html>
